pipeline {
    agent any
    stages {
        stage ('Create Namespace') {
            steps {
                sh '''
                     oc login https://dev-openshift.copaccenture.com:8443 -u suneet.bhatnagar -p Newuser@123 --insecure-skip-tls-verify
                     oc new-project cop-service2 
                   '''
            }    
        }
        stage ('Create Configmap') {
            steps {
                sh '''
                     oc create configmap cmp-cop-service --from-file=confg/config.properties 
                   '''
            }    
        }
        stage ('build and deploy') {
            steps {
                sh '''
                     oc process -f openjdk-basic-template.yml --param-file cop-param.txt | oc apply -f- 
                   '''
            }    
        }
    }
}
